{"version":3,"file":"stellar-contracts.mjs","sources":["../lib/diagnostics.ts","../lib/StellarTxnContext.ts","../lib/StellarContract.ts","../src/DefaultMinter.ts","../lib/Capo.ts","../lib/StellarTestHelper.ts","../src/examples/SampleTreasury.ts"],"sourcesContent":["import {\n    Address, Datum, Tx,\n    TxOutput,\n    UTxO, Value\n} from \"@hyperionbt/helios\";\nimport { TxInput } from \"./HeliosPromotedTypes.js\";\n\n\nexport function hexToPrintableString(hexStr) {\n    let result = \"\";\n    for (let i = 0; i < hexStr.length; i += 2) {\n        let hexChar = hexStr.substring(i, i + 2);\n        let charCode = parseInt(hexChar, 16);\n\n        // ASCII printable characters are in the range 32 (space) to 126 (~)\n        if (charCode >= 32 && charCode <= 126) {\n            result += String.fromCharCode(charCode);\n        } else {\n            result += `‹${hexChar}›`;\n        }\n    }\n    return result;\n}\nexport function assetsAsString(v: any) {\n    return Object.entries(v)\n        .map(([policyId, tokens]) => {\n            const tokenString = Object.entries(tokens as any)\n                .map(\n                    ([name, count]) => `${count}×💴 ${hexToPrintableString(name)}`\n                )\n                .join(\" + \");\n            return `⦑🏦 ${policyId.substring(0, 12)}… ${tokenString}⦒`;\n        })\n        .join(\"\\n  \");\n}\nexport function lovelaceToAda(l: bigint | number) {\n    const asNum = parseInt(l.toString());\n    const ada = (asNum && `${(Math.round(asNum / 1000) / 1000).toFixed(3)} ADA`) || \"\";\n    return ada;\n}\n\nexport function valueAsString(v: Value) {\n    const ada = lovelaceToAda(v.lovelace);\n    const assets = assetsAsString(v.assets.dump?.() || v.assets);\n    return [ada, assets].filter((x) => !!x).join(\" + \");\n}\n\nexport function txAsString(tx: Tx): string {\n    const bodyAttrs = [\n        \"inputs\",\n        \"minted\",\n        \"collateral\",\n        \"outputs\",\n        \"fee\",\n        \"lastValidSlot\",\n        \"firstValidSlot\",\n        \"metadataHash\",\n        \"scriptDataHash\",\n        \"signers\",\n        \"collateralReturn\",\n        \"refInputs\",\n    ];\n    const witnessAttrs = [\n        \"signatures\",\n        \"datums\",\n        \"refScripts\",\n        \"scripts\",\n        \"redeemers\",\n        \"nativeScripts\",\n    ];\n\n    let details = \"\";\n\n    const d = tx.dump();\n    //!!! todo: improve interface of tx so useful things have a non-private api\n    //!!! todo: get rid of dump()\n    //!!! todo: get back to type-safety in this diagnostic suite\n    for (const x of bodyAttrs) {\n        let item = tx.body[x] || (d.body[x] as any);\n        let skipLabel = false;\n        // console.log(`attr '${x}'`)\n        if (Array.isArray(item) && !item.length) continue;\n\n        if (!item) continue;\n        if (\"inputs\" == x) {\n            item = `\\n  ${item.map((x) => txInputAsString(x)).join(\"\\n  \")}`;\n        }\n        if (\"collateral\" == x) {\n            //!!! todo: group collateral with inputs and reflect it being spent either way,\n            //     IFF it is also a tx `input`\n            //!!! todo: move collateral to bottom with collateralReturn,\n            //     IFF it is not part of the tx `inputs`\n            item = item.map((x) => txInputAsString(x, \"🔪\")).join(\"\\n    \");\n        }\n        if (\"minted\" == x) {\n            const assets = item?.dump();\n            if (!Object.entries(assets || {}).length) continue;\n\n            item = ` ❇️  ${assetsAsString(assets)}`;\n        }\n        if (\"outputs\" == x) {\n            item = `\\n  ${item\n                .map((x, i) => txOutputAsString(x, `${i}  <-`))\n                .join(\"\\n  \")}`;\n        }\n        if (\"signers\" == x) {\n            item = item.map((x) => {\n                if (!x.hex) debugger;\n                return `🔑#${x.hex.substring(0, 8)}…`;\n            });\n        }\n\n        if (\"fee\" == x) {\n            item = parseInt(item);\n            item = `${(Math.round(item / 1000) / 1000).toFixed(3)} ADA`;\n            // console.log(\"fee\", item)\n        }\n\n        if (\"collateralReturn\" == x) {\n            skipLabel = true;\n            item = `  ${txOutputAsString(\n                item,\n                `0  <- ❓`\n            )} conditional: collateral change (returned in case of txn failure)`;\n        }\n\n        details += `${skipLabel ? \"\" : \"  \" + x + \": \"}${item}\\n`;\n    }\n    let hasWinfo = false;\n    const winfo = {};\n    for (const x of witnessAttrs) {\n        let item = tx.witnesses[x] || (d.witnesses[x] as any);\n        if (Array.isArray(item) && !item.length) continue;\n        if (\"datums\" == x && !Object.entries(item || {}).length) continue;\n        if (\"signatures\" == x) {\n            if (!item) continue;\n            item = item.map((s) => {\n                return `🖊️ ${Address.fromPubKeyHash(s.pubKeyHash)\n                    .toBech32()\n                    .substring(0, 24)}…`;\n            });\n            if (item.length > 1) item.unshift(\"\");\n            item = item.join(\"\\n    \");\n        }\n        if (\"redeemers\" == x) {\n            if (!item) continue;\n            //!!! todo: augment with mph when that's available from the Redeemer.\n            item = item.map(                \n                (x) => {\n                    // console.log(\"redeemer keys\", ...[ ...Object.keys(x2) ], x2.dump());\n                    const indexInfo = (x.inputIndex == -1) ? `txin #‹tbd›` : \n                        'inputIndex' in x ? `txin #${1+x.inputIndex}` : `mph #${1+x.mphIndex}`;\n        \n                    return `🏧  ${indexInfo} ${x.data.toString()}`\n                }\n            );\n            if (item.length > 1) item.unshift(\"\");\n            item = item.join(\"\\n    \");\n        }\n        if (\"scripts\" == x) {\n            if (!item) continue;\n            item = item.map((s) => {\n                try {\n                    return `🏦 ${s.mintingPolicyHash.hex.substring(\n                        0,\n                        12\n                    )}… (minting)`;\n                } catch (e) {\n                    return `📜 ${s.validatorHash.hex.substring(\n                        0,\n                        12\n                    )}… (validator)`;\n                }\n            });\n            if (item.length > 1) item.unshift(\"\");\n            item = item.join(\"\\n    \");\n        }\n\n        if (!item) continue;\n        hasWinfo = true;\n        winfo[x] = item;\n    }\n    if (hasWinfo) {\n        details += Object.entries(winfo)\n            .map(([k, v]) => `  ${k}: ${v}\\n`)\n            .join(\"\");\n    }\n    try {\n        details = details + `  txId: ${tx.id().dump()}`;\n    } catch (e) {\n        details = details + `  (Tx not yet finalized!)`;\n    }\n    return details;\n}\n\nexport function txInputAsString(x: TxInput, prefix = \"-> \"): string {\n    return `${prefix}${x.address.toBech32().substring(0, 18)}… ${valueAsString(\n        x.value\n    )} = 📖 ${x.txId.hex.substring(0, 12)}…@${x.utxoIdx}`;\n}\n\nexport function utxosAsString(utxos: UTxO[], joiner = \"\\n\"): string {\n    return utxos.map((u) => utxoAsString(u, \" 💵\")).join(joiner);\n}\n\nexport function utxoAsString(u: UTxO, prefix = \"💵\"): string {\n    return ` 📖 ${u.txId.hex.substring(0, 12)}…@${u.utxoIdx}: ${txOutputAsString(u.origOutput, prefix)}`; // or 🪙\n}\n\nexport function datumAsString(d: Datum | undefined): string {\n    if (!d) return \"\"; //\"‹no datum›\";\n\n    // debugger\n    const dhss = d.hash.hex.substring(0, 12);\n    if (d.isInline()) return `d‹inline:${dhss}…›`;\n    return `d‹hash:${dhss}…›`;\n}\n\nexport function txOutputAsString(x: TxOutput, prefix = \"<-\"): string {\n    const bech32 = (x.address as any).bech32 || x.address.toBech32();\n\n    return `${prefix} ${bech32.substring(0, 18)}… ${datumAsString(\n        x.datum\n    )} ${valueAsString(x.value)}`;\n}\n","import {\n    HeliosData, Signature, Tx,\n    TxOutput,\n    TxWitnesses,\n    UTxO,\n    UplcData,\n    UplcDataValue,\n    Wallet,\n    bytesToHex,\n    hexToBytes\n} from \"@hyperionbt/helios\";\nimport { txAsString } from \"./diagnostics.js\";\n\n//!!! if we could access the inputs and outputs in a building Tx,\n//  this might  not be necessary (unless it becomes a\n//   bigger-picture contextual container that serves various Stellar\n//   contract scripts with non-txn context for building a Tx)\n\nexport class StellarTxnContext {\n    tx: Tx;\n    inputs: UTxO[];\n    collateral?: UTxO;\n    outputs: TxOutput[];\n    feeLimit?: bigint;\n    constructor() {\n        this.tx = new Tx();\n        this.inputs = [];\n        this.collateral = undefined;\n        this.outputs = [];\n    }\n    dump() {\n        const { tx } = this;\n        return txAsString(tx);\n    }\n\n    mintTokens(...args: Parameters<Tx[\"mintTokens\"]>) : StellarTxnContext {\n        this.tx.mintTokens(...args);\n\n        return this;\n    }\n    \n    reservedUtxos() : UTxO[] {\n        return [\n            ... this.inputs, \n            this.collateral \n        ].filter((x) => !!x) as UTxO[]\n    }\n\n    utxoNotReserved(u: UTxO) : UTxO | undefined {\n        if (this.collateral?.eq(u)) return undefined;\n        if (this.inputs.find(i => i.eq(u)) ) return undefined;\n        return u;\n    }\n\n    addCollateral(collateral: UTxO) {\n        if (!collateral.value.assets.isZero()) {\n            throw new Error(`invalid attempt to add non-pure-ADA utxo as collateral`)\n        }\n        this.collateral = collateral;\n\n        this.tx.addCollateral(collateral)\n        return this;\n    }\n\n    addInput(input: UTxO,\n        rawRedeemer?: null | UplcDataValue | UplcData | HeliosData\n    ) {\n        this.inputs.push(input);\n        this.tx.addInput(input, rawRedeemer);\n        return this;\n    }\n\n    addInputs(inputs: UTxO[]) {\n        this.inputs.push(...inputs);\n        this.tx.addInputs(inputs);\n        return this;\n    }\n\n    addOutput(output: TxOutput) {\n        this.outputs.push(output);\n        this.tx.addOutput(output);\n        return this;\n    }\n    addOutputs(outputs: TxOutput[]) {\n        this.outputs.push(...outputs);\n        this.tx.addOutputs(outputs);\n        return this;\n    }\n    attachScript(...args: Parameters<Tx[\"attachScript\"]>) {\n        this.tx.attachScript(...args)\n\n        return this;\n    }\n\n    async addSignature(wallet: Wallet) {\n        const [sig] = await wallet.signTx(this.tx);\n        \n        this.tx.addSignature(sig)\n\n    }\n\n    /**\n     * To add a script to the transaction context, use `attachScript`\n     *\n     * @deprecated - invalid method name; use attachScript\n     **/\n    addScript() {\n    }\n}\n\n","import {\n    Address,\n    Assets,\n    DatumHash,\n    HInt,\n    HeliosData,\n    MintingPolicyHash,\n    Network,\n    NetworkParams,\n    Program,\n    TxOutput,\n    UTxO,\n    UplcData,\n    UplcDataValue,\n    UplcProgram,\n    Value,\n    Wallet,\n    extractScriptPurposeAndName,\n} from \"@hyperionbt/helios\";\nimport { StellarTxnContext } from \"./StellarTxnContext.js\";\nimport { utxosAsString } from \"./diagnostics.js\";\nimport { TxInput, valuesEntry } from \"./HeliosPromotedTypes.js\";\n\ntype tokenPredicate<tokenBearer extends canHaveToken> = ((\n    something: tokenBearer\n) => tokenBearer | undefined) & { value: Value };\nexport type isActivity = {\n    redeemer:  UplcDataValue | UplcData\n    // | HeliosData \n}\n\ntype WalletsAndAddresses = {\n    wallets: Wallet[];\n    addresses?: Address[];\n};\nexport type utxoInfo = {\n    u: UTxO;\n    sufficient: boolean;\n    free: bigint;\n    minAdaAmount: bigint;\n};\n\nexport type stellarSubclass<\n    S extends StellarContract<P>,\n    P extends paramsBase\n> = new (args: StellarConstructorArgs<S, P>) => S & StellarContract<P>;\n\nexport type paramsBase = Record<string, any>;\n\nexport const Activity = {\n    partialTxn(proto, thingName, descriptor) {\n        needsActiveVerb(thingName)\n        return partialTxn(proto, thingName, descriptor);\n    },\n    redeemer(proto, thingName, descriptor) {\n        needsActiveVerb(thingName, !!\"okwhatever\")\n        return Activity.redeemerData(proto, thingName, descriptor);\n    },\n    redeemerData(proto, thingName, descriptor) {\n        //!!! todo: registry and cross-checking for missing redeeming methods\n        \n        //!!! todo: develop more patterns of \"redeemer uses an input of a certain mph/value\"\n        return descriptor;\n    }\n};\n\nfunction needsActiveVerb(thingName : string, okWorkaround? : boolean) {\n    if (!thingName.match(/ing/)) {\n        const orWorkaround = okWorkaround  && \"(or work around with @Activity.redeemerData instead)\";\n        throw new Error(\n            `Activity: ${thingName}: name should have 'ing' in it ${orWorkaround}`\n        );\n    }\n    if (thingName.match(/^ing/)) {\n        throw new Error(\n            `Activity: ${thingName}: name shouldn't start with 'ing'`\n        );\n    }\n\n}\n\n\nexport function datum(proto, thingName, descriptor) {\n    // console.log(\"+datum\", proto.constructor.name, thingName || \"none\", descriptor.value.name )\n    if (!thingName.match(/^mkDatum/)) {\n        throw new Error(\n            `@datum factory: ${thingName}: name should start with 'mkDatum...'`\n        );\n    }\n    return descriptor;\n}\n\nexport function txn(proto, thingName, descriptor) {\n    // console.log(\"+datum\", proto.constructor.name, thingName || \"none\", descriptor.value.name )\n    if (!thingName.match(/^mkTxn/)) {\n        throw new Error(\n            `@txn factory: ${thingName}: name should start with 'mkTxn...'`\n        );\n    }\n    return descriptor;\n}\n\nexport function partialTxn(proto, thingName, descriptor) {\n    // console.log(\"+datum\", proto.constructor.name, thingName || \"none\", descriptor.value.name )\n    if (!thingName.match(/^txn[A-Z]/)) {\n        throw new Error(\n            `@partialTxn factory: ${thingName}: should start with 'txn[A-Z]...'`\n        );\n    }\n    return descriptor;\n}\n\nexport async function findInputsInWallets(\n    v: Value,\n    searchIn: WalletsAndAddresses,\n    network: Network\n) {\n    const { wallets, addresses } = searchIn;\n\n    const lovelaceOnly = v.assets.isZero();\n    console.warn(\"finding inputs\", {\n        lovelaceOnly,\n    });\n\n    for (const w of wallets) {\n        const [a] = await w.usedAddresses;\n        console.log(\"finding funds in wallet\", a.toBech32().substring(0, 18));\n        const utxos = await w.utxos;\n        for (const u of utxos) {\n            if (lovelaceOnly) {\n                if (u.value.assets.isZero() && u.value.lovelace >= v.lovelace) {\n                    return u;\n                }\n                console.log(\"  - too small; skipping \", u.value.dump());\n            } else {\n                if (u.value.ge(v)) {\n                    return u;\n                }\n            }\n        }\n    }\n    if (lovelaceOnly) {\n        throw new Error(\n            `no ADA is present except those on token bundles.  TODO: findFreeLovelaceWithTokens`\n        );\n        // const spareChange = this.findFreeLovelaceWithTokens(v, w)\n    }\n    //!!! todo: allow getting free ada from a contract address?\n\n    if (addresses) {\n        for (const a of addresses) {\n            const utxos = await network.getUtxos(a);\n            for (const u of utxos) {\n                if (u.value.ge(v)) {\n                    return u;\n                }\n            }\n        }\n    }\n\n    throw new Error(\n        `None of these wallets${\n            (addresses && \" or addresses\") || \"\"\n        } have the needed tokens`\n    );\n}\n\nexport type StellarConstructorArgs<\n    SC extends StellarContract<P>,\n    P extends paramsBase = SC extends StellarContract<infer P> ? P : never\n> = {\n    params: P;\n    network: Network;\n    networkParams: NetworkParams;\n    isTest: boolean;\n    myActor?: Wallet;\n};\nexport type utxoPredicate =\n    | ((u: UTxO) => UTxO | undefined)\n    | ((u: UTxO) => boolean)\n    | ((u: UTxO) => boolean | undefined);\n\ntype scriptPurpose =\n    | \"testing\"\n    | \"minting\"\n    | \"spending\"\n    | \"staking\"\n    | \"module\"\n    | \"linking\";\n\nexport type canHaveToken = UTxO | TxInput | TxOutput | Assets;\n\n//<CT extends Program>\nexport class StellarContract<\n    // SUB extends StellarContract<any, ParamsType>,\n    ParamsType extends paramsBase\n> {\n    //! it has configuredContract: a parameterized instance of the contract\n    //  ... with specific `parameters` assigned.\n    configuredContract: Program;\n    compiledContract: UplcProgram;\n    paramsIn: ParamsType;\n    contractParams: paramsBase;\n    network: Network;\n    networkParams: NetworkParams;\n    _template?: Program;\n    myActor?: Wallet;\n\n    getContractParams(params) {\n        return params;\n    }\n\n    constructor({\n        params,\n        network,\n        networkParams,\n        isTest,\n        myActor,\n    }: StellarConstructorArgs<StellarContract<ParamsType>, ParamsType>) {\n        this.network = network;\n        this.networkParams = networkParams;\n        this.paramsIn = params;\n        if (myActor) this.myActor = myActor;\n\n        this.contractParams = this.getContractParams(params);\n\n        const configured = (this.configuredContract = this.contractTemplate());\n        this.configuredContract.parameters = this.contractParams;\n\n        const simplify = !isTest;\n        // const t = new Date().getTime();\n        this.compiledContract = configured.compile(simplify);\n        // const t2 = new Date().getTime();\n\n        // Result: ~80ms cold-start or (much) faster on additional compiles\n        // console.log(\"::::::::::::::::::::::::compile time \"+ (t2 - t) + \"ms\")\n        // -> caching would not improve\n\n        // const configured = Program.new(source)\n        // configured.parameters = params;\n        // const compiledContract = configured.compile(simplify)\n        // const addr = Address.fromHashes(compiledContract.validatorHash)\n    }\n\n    get datumType() {\n        return this.configuredContract.types.Datum;\n    }\n    _purpose?: scriptPurpose;\n    get purpose() {\n        if (this._purpose) return this._purpose;\n\n        const purpose = this.configuredContract.purpose as scriptPurpose;\n        return (this._purpose = purpose as scriptPurpose);\n    }\n\n    get address(): Address {\n        return Address.fromHashes(this.compiledContract.validatorHash);\n    }\n\n    get mintingPolicyHash() {\n        if (\"minting\" != this.purpose) return undefined;\n\n        return this.compiledContract.mintingPolicyHash;\n    }\n\n    get identity() {\n        if (\"minting\" == this.purpose) {\n            const b32 = this.compiledContract.mintingPolicyHash.toBech32();\n            //!!! todo: verify bech32 checksum isn't messed up by this:\n            return b32.replace(/^asset/, \"mph\");\n        }\n\n        return this.address.toBech32();\n    }\n\n    stringToNumberArray(str: string): number[] {\n        let encoder = new TextEncoder();\n        let byteArray = encoder.encode(str);\n        return [...byteArray].map((x) => parseInt(x.toString()));\n    }\n\n    mkValuesEntry(tokenName: string, count: bigint): valuesEntry {\n        return [this.stringToNumberArray(tokenName), count];\n    }\n\n    addScriptWithParams<\n        SC extends StellarContract<any>\n        // P = SC extends StellarContract<infer P> ? P : never\n    >(\n        TargetClass: new (\n            a: SC extends StellarContract<any>\n                ? StellarConstructorArgs<SC>\n                : never\n        ) => SC,\n        params: SC extends StellarContract<infer P> ? P : never\n    ) {\n        const args: StellarConstructorArgs<SC> = {\n            params,\n            network: this.network,\n            myActor: this.myActor,\n            networkParams: this.networkParams,\n            isTest: true,\n        };\n        //@ts-expect-error todo: why is the conditional type not matching enough?\n        const strella = new TargetClass(args);\n        return strella;\n    }\n\n    // async findDatum(d: Datum | DatumHash): Promise<UTxO[]>;\n    // async findDatum(predicate: utxoPredicate): Promise<UTxO[]>;\n    // async findDatum(d: Datum | DatumHash | utxoPredicate): Promise<UTxO[]> {\n    //     let targetHash: DatumHash | undefined =\n    //         d instanceof Datum\n    //             ? d.hash\n    //             : d instanceof DatumHash\n    //             ? d\n    //             : undefined;\n    //     let predicate =\n    //         \"function\" === typeof d\n    //             ? d\n    //             : (u: UTxO) => {\n    //                   const match =\n    //                       u.origOutput?.datum?.hash.hex == targetHash?.hex;\n    //                   console.log(\n    //                       txOutputAsString(\n    //                           u.origOutput,\n    //                           `    ${match ? \"✅ matched \" : \"❌ no match\"}`\n    //                       )\n    //                   );\n    //                   return !!match;\n    //               };\n\n    //     //prettier-ignore\n    //     console.log(\n    //         `finding utxo with datum ${\n    //             targetHash?.hex.substring(0,12)\n    //         }... in wallet`,\n    //         this.address.toBech32().substring(0,18)\n    //     );\n\n    //     const heldUtxos = await this.network.getUtxos(this.address);\n    //     console.log(`    - found ${heldUtxos.length} utxo:`);\n    //     return heldUtxos.filter(predicate);\n    // }\n\n    findSmallestUnusedUtxo(\n        lovelace: bigint,\n        utxos: UTxO[],\n        tcx?: StellarTxnContext\n    ): UTxO | undefined {\n        const value = new Value({ lovelace });\n        const toSortInfo = this._mkUtxoSortInfo(value.lovelace);\n\n        const found = utxos\n            .map(toSortInfo)\n            .filter(this._utxoIsPureADA)\n            .filter(this._utxoIsSufficient)\n            .filter((uInfo: utxoInfo) => {\n                if (!tcx) return true;\n                return !!tcx?.utxoNotReserved(uInfo.u);\n            })\n            .sort(this._utxoSortSmallerAndPureADA)\n            .map(this._infoBackToUtxo)\n            .at(0);\n\n        return found;\n    }\n\n    //! creates a filtering function, currently for UTxO-filtering only.\n    //! with the optional tcx argument, utxo's already reserved\n    //  ... in that transaction context will be skipped.\n    mkValuePredicate(\n        lovelace: bigint,\n        tcx?: StellarTxnContext\n    ): tokenPredicate<UTxO> {\n        const value = new Value({ lovelace });\n        const predicate = _adaPredicate.bind(this, tcx) as tokenPredicate<any>;\n        predicate.value = value;\n        return predicate;\n\n        function _adaPredicate(\n            this: StellarContract<ParamsType>,\n            tcx: StellarTxnContext | undefined,\n            utxo: UTxO\n        ): UTxO | undefined {\n            return this.hasOnlyAda(value, tcx, utxo);\n        }\n    }\n\n    mkTokenPredicate(\n        vOrMph: Value | MintingPolicyHash,\n        tokenName?: string,\n        quantity?: bigint\n    ): tokenPredicate<any> {\n        let v: Value;\n\n        if (!vOrMph)\n            throw new Error(\n                `missing required Value or MintingPolicyHash in arg1`\n            );\n        const predicate = _tokenPredicate.bind(this) as tokenPredicate<any>;\n\n        const isValue = !(vOrMph instanceof MintingPolicyHash);\n        if (isValue) {\n            v = predicate.value = vOrMph;\n            return predicate;\n        }\n        if (!tokenName || !quantity)\n            throw new Error(\n                `missing required tokenName, quantity for this mph`\n            );\n\n        const mph = vOrMph;\n        v = predicate.value = this.tokenAsValue(tokenName, quantity, mph);\n        return predicate;\n\n        function _tokenPredicate<tokenBearer extends canHaveToken>(\n            this: StellarContract<ParamsType>,\n            something: tokenBearer\n        ): tokenBearer | undefined {\n            return this.hasToken(something, v);\n        }\n    }\n\n    private hasToken<tokenBearer extends canHaveToken>(\n        something: tokenBearer,\n        value: Value,\n        tokenName?: string,\n        quantity?: bigint\n    ): tokenBearer | undefined {\n        if (something instanceof UTxO)\n            return (\n                (this.utxoHasToken(something, value, tokenName, quantity) &&\n                    something) ||\n                undefined\n            );\n        if (something instanceof TxOutput)\n            return (\n                (this.outputHasToken(something, value, tokenName, quantity) &&\n                    something) ||\n                undefined\n            );\n        if (something instanceof Assets)\n            return (\n                (this.assetsHasToken(something, value, tokenName, quantity) &&\n                    something) ||\n                undefined\n            );\n\n        //!!! todo: more explicit match for TxInput, which seems to be a type but not an 'instanceof'-testable thing.\n        return (\n            (this.inputHasToken(something, value, tokenName, quantity) &&\n                something) ||\n            undefined\n        );\n    }\n\n    private utxoHasToken(\n        u: UTxO,\n        value: Value,\n        tokenName?: string,\n        quantity?: bigint\n    ) {\n        return (\n            this.outputHasToken(u.origOutput, value, tokenName, quantity) && u\n        );\n    }\n    private inputHasToken(\n        i: TxInput,\n        value: Value,\n        tokenName?: string,\n        quantity?: bigint\n    ) {\n        return (\n            this.outputHasToken(i.origOutput, value, tokenName, quantity) && i\n        );\n    }\n\n    private assetsHasToken(\n        a: Assets,\n        vOrMph: Value | MintingPolicyHash,\n        tokenName?: string,\n        quantity?: bigint\n    ) {\n        const v =\n            vOrMph instanceof MintingPolicyHash\n                ? this.tokenAsValue(tokenName!, quantity!, vOrMph)\n                : vOrMph;\n\n        return a.ge(v.assets);\n    }\n\n    private outputHasToken(\n        o: TxOutput,\n        vOrMph: Value | MintingPolicyHash,\n        tokenName?: string,\n        quantity?: bigint\n    ) {\n        if (vOrMph instanceof MintingPolicyHash && !tokenName)\n            throw new Error(\n                `missing required tokenName (or use a Value in arg2`\n            );\n        if (vOrMph instanceof MintingPolicyHash && !quantity)\n            throw new Error(\n                `missing required quantity (or use a Value in arg2`\n            );\n\n        const v =\n            vOrMph instanceof MintingPolicyHash\n                ? this.tokenAsValue(tokenName!, quantity!, vOrMph)\n                : vOrMph;\n\n        return o.value.ge(v);\n    }\n\n    tokenAsValue(\n        tokenName: string,\n        quantity: bigint,\n        mph?: MintingPolicyHash\n    ): Value {\n        if (!mph) {\n            mph = (this as any).mph;\n            if (!mph)\n                throw new Error(\n                    `tokenAsValue: mph in arg3 required unless the stellar contract (${this.constructor.name}) has an 'mph' getter.`\n                );\n        }\n\n        const v = new Value(\n            this.ADA(0),\n            new Assets([[mph, [this.mkValuesEntry(tokenName, quantity)]]])\n        );\n        const o = new TxOutput(this.address, v);\n        v.setLovelace(o.calcMinLovelace(this.networkParams));\n\n        return v;\n    }\n\n    hasOnlyAda(value: Value, tcx: StellarTxnContext | undefined, u: UTxO) {\n        const toSortInfo = this._mkUtxoSortInfo(value.lovelace);\n\n        const found = [u]\n            .map(toSortInfo)\n            .filter(this._utxoIsSufficient)\n            .filter(this._utxoIsPureADA)\n            .map(this._infoBackToUtxo)\n            .at(0);\n\n        return found;\n    }\n\n    protected _utxoSortSmallerAndPureADA(\n        { free: free1, minAdaAmount: r1 }: utxoInfo,\n        { free: free2, minAdaAmount: r2 }: utxoInfo\n    ) {\n        {\n            //! primary: treats pure-ada utxos as always better\n            if (!r1 && r2) {\n                return -1;\n            }\n            if (r1 && !r2) {\n                return 1; //\n            }\n        }\n        //! secondary: smaller utxos are more preferred than larger ones\n        if (free2 > free1) return 1;\n        if (free2 < free1) return -1;\n        return 0;\n    }\n\n    protected _utxoIsSufficient({ sufficient }: utxoInfo) {\n        return !!sufficient;\n    }\n    protected _utxoIsPureADA({ u }: utxoInfo) {\n        return u.value.assets.isZero() ? u : undefined;\n    }\n    protected _infoBackToUtxo({ u }: utxoInfo) {\n        return u;\n    }\n    protected _mkUtxoSortInfo(min: bigint, max?: bigint) {\n        return (u: UTxO): utxoInfo => {\n            const minAdaAmount = u.value.assets.isZero()\n                ? BigInt(0)\n                : u.origOutput.calcMinLovelace(this.networkParams);\n            const free = u.value.lovelace - minAdaAmount;\n            const sufficient = free > min && (max ? free < max : true);\n            const t = { u, sufficient, free, minAdaAmount };\n            // console.log(t, utxoAsString(u))\n            return t;\n        };\n    }\n    protected _utxoCountAdaOnly(c: number, { minAdaAmount }: utxoInfo): number {\n        return c + (minAdaAmount ? 0 : 1);\n    }\n\n    async findAnySpareUtxos(tcx: StellarTxnContext): Promise<UTxO[] | never> {\n        if (!this.myActor) throw this.missingActorError;\n\n        const toSortInfo = this._mkUtxoSortInfo(this.ADA(2), this.ADA(10));\n        const notReserved = tcx\n            ? tcx.utxoNotReserved.bind(tcx)\n            : (u: UTxO) => u;\n\n        return this.myActor.utxos.then((utxos) => {\n            const allSpares = utxos\n                .filter(notReserved)\n                .map(toSortInfo)\n                .filter(this._utxoIsSufficient)\n                .sort(this._utxoSortSmallerAndPureADA);\n\n            if (allSpares.reduce(this._utxoCountAdaOnly, 0) > 0) {\n                return allSpares\n                    .filter(this._utxoIsPureADA)\n                    .map(this._infoBackToUtxo);\n            }\n            return allSpares.map(this._infoBackToUtxo);\n        });\n    }\n\n    async submit(\n        tcx: StellarTxnContext,\n        {\n            sign = true,\n            signers = [],\n        }: {\n            sign?: boolean;\n            signers?: Wallet[];\n        } = {}\n    ) {\n        let { tx, feeLimit = 2_000_000n } = tcx;\n        if (this.myActor || signers.length) {\n            const [changeAddress] = (await this.myActor?.usedAddresses) || [];\n            const spares = await this.findAnySpareUtxos(tcx);\n            const willSign = [...signers];\n            if (sign && this.myActor) {\n                willSign.push(this.myActor);\n            }\n            for (const s of willSign) {\n                const [a] = await s.usedAddresses;\n                if (tx.body.signers.find(s => a.pubKeyHash.hex === s.hex)) continue;\n                tx.addSigner(a.pubKeyHash);\n            }\n            const feeEstimated = tx.estimateCollateralBaseFee(this.networkParams, changeAddress, spares)\n            if (feeEstimated > feeLimit) {\n                console.log(\"outrageous fee - adjust tcx.feeLimit to get a different threshold\")\n                throw new Error(`outrageous fee-computation found - check txn setup for correctness`)\n            }\n            try {\n                // const t1 = new Date().getTime();\n                await tx.finalize(this.networkParams, changeAddress, spares);\n                // const t2 = new Date().getTime();\n                // const elapsed = t2 - t1;\n                // console.log(`::::::::::::::::::::::::::::::::: tx validation time: ${elapsed}ms`);\n                // result: validations for non-trivial txns can take ~800+ ms\n                //  - validations with simplify:true, ~250ms - but ...\n                //    ... with elided error messages that don't support negative-testing very well\n            } catch (e) {\n                console.log(\"FAILED submitting:\", tcx.dump());\n                throw e;\n            }\n            for (const s of willSign) {\n                const sig = await s.signTx(tx);\n                tx.addSignatures(sig, true);\n            }\n        } else {\n            console.warn(\"no 'myActor'; not finalizing\");\n        }\n        console.log(\"Submitting tx: \", tcx.dump());\n\n        return this.network.submitTx(tx);\n    }\n\n    ADA(n: bigint | number): bigint {\n        const bn =\n            \"number\" == typeof n\n                ? BigInt(Math.round(1_000_000 * n))\n                : ((BigInt(1_000_000) * n) as bigint);\n        return bn;\n    }\n\n    //! it requires an subclass to define a contractSource\n    contractSource(): string | never {\n        throw new Error(`missing contractSource impl`);\n    }\n\n    //!!! todo: implement more and/or test me:\n    // async findFreeLovelaceWithTokens(v: Value, w: Wallet) {\n    // it.todo(\"helps find spare lovelace in tokens\");\n    // it.todo(\"will help harvest spare lovelace in the future if minUtxo is changed\");\n    //     const utxos = await w.utxos;\n    //     const lovelaceOnly = v.assets.isZero();\n    //     //! it finds free lovelace in token bundles, if it can't find free lovelace otherwise\n    //     if (lovelaceOnly) {\n    //         let maxFree: UTxO, minToken: UTxO;\n    //         let minPolicyCount = Infinity;\n\n    //         for (const u of utxos) {\n    //             const policies = u.value.assets.mintingPolicies.length;\n    //             if (policies < minPolicyCount) {\n    //                 minPolicyCount = policies;\n    //                 minToken = u;\n    //             }\n\n    //             const free =\n    //                 u.value.lovelace -\n    //                 u.origOutput.calcMinLovelace(this.networkParams);\n    //             //@ts-ignore\n    //             if (!maxFree) {\n    //                 maxFree = u;\n    //             } else if (free > maxFree!.value.lovelace) {\n    //                 maxFree = u;\n    //             }\n    //         }\n    //     }\n    // }\n\n    // static withParams(this: new () => StellarContract, params: any) : never | StellarContract {\n    //     throw new Error(`subclass must implement static withParams`);\n    //     // return new this(params)\n    // }\n    // constructor(params: any) {\n\n    // }\n    contractTemplate() {\n        const src = this.contractSource();\n        // console.log({src, Program)\n\n        return (this._template = this._template || Program.new(src));\n    }\n\n    async getMyActorAddress() {\n        if (!this.myActor) throw this.missingActorError;\n\n        const [addr] = await this.myActor.usedAddresses;\n\n        return addr;\n    }\n\n    private get missingActorError(): string | undefined {\n        return `missing required 'myActor' property on ${this.constructor.name} instance`;\n    }\n\n    async mustFindActorUtxo(\n        name: string,\n        predicate: (u: UTxO) => UTxO | undefined,\n        exceptInTcx: StellarTxnContext,\n        extraErrorHint?: string\n    ): Promise<UTxO | never>;\n    async mustFindActorUtxo(\n        name: string,\n        predicate: (u: UTxO) => UTxO | undefined,\n        extraErrorHint?: string\n    ): Promise<UTxO | never>;\n\n    async mustFindActorUtxo(\n        name: string,\n        predicate: (u: UTxO) => UTxO | undefined,\n        hintOrExcept?: string | StellarTxnContext,\n        hint?: string\n    ): Promise<UTxO | never> {\n        const address = await this.getMyActorAddress();\n\n        const isTcx = hintOrExcept instanceof StellarTxnContext;\n        const exceptInTcx = isTcx ? hintOrExcept : undefined;\n        const extraErrorHint = isTcx\n            ? hint\n            : \"string\" == typeof hintOrExcept\n            ? hintOrExcept\n            : undefined;\n\n        return this.mustFindUtxo(\n            name,\n            predicate,\n            { address, exceptInTcx },\n            extraErrorHint\n        );\n    }\n\n    async mustFindMyUtxo(\n        name: string,\n        predicate: (u: UTxO) => UTxO | undefined,\n        exceptInTcx: StellarTxnContext,\n        extraErrorHint?: string\n    ): Promise<UTxO | never>;\n    async mustFindMyUtxo(\n        name: string,\n        predicate: (u: UTxO) => UTxO | undefined,\n        extraErrorHint?: string\n    ): Promise<UTxO | never>;\n\n    async mustFindMyUtxo(\n        name: string,\n        predicate: (u: UTxO) => UTxO | undefined,\n        hintOrExcept?: string | StellarTxnContext,\n        hint?: string\n    ): Promise<UTxO | never> {\n        const { address } = this;\n        const isTcx = hintOrExcept instanceof StellarTxnContext;\n        const exceptInTcx = isTcx ? hintOrExcept : undefined;\n        const extraErrorHint = isTcx\n            ? hint\n            : \"string\" == typeof hintOrExcept\n            ? hintOrExcept\n            : undefined;\n\n        return this.mustFindUtxo(\n            name,\n            predicate,\n            { address, exceptInTcx },\n            extraErrorHint\n        );\n    }\n\n    async mustFindUtxo(\n        name: string,\n        predicate: (u: UTxO) => UTxO | undefined,\n        {\n            address,\n            exceptInTcx,\n        }: { address: Address; exceptInTcx?: StellarTxnContext },\n        extraErrorHint: string = \"\"\n    ): Promise<UTxO | never> {\n        const found = await this.hasUtxo(name, predicate, {\n            address,\n            exceptInTcx,\n        });\n        if (!found) {\n            throw new Error(\n                `${this.constructor.name}: '${name}' utxo not found (${extraErrorHint}) in address`\n            );\n        }\n\n        return found;\n    }\n    toUtxoId(u: UTxO) {\n        return `${u.txId.hex}@${u.utxoIdx}`;\n    }\n\n    async txnFindUtxo(tcx: StellarTxnContext,\n        name: string,\n        predicate: utxoPredicate,\n        address = this.address\n    ): Promise<UTxO | undefined> {\n        return this.hasUtxo(name, predicate, {\n            address,\n            exceptInTcx: tcx\n        })\n    }\n\n    async hasUtxo(\n        name: string,\n        predicate: utxoPredicate,\n        {\n            address,\n            exceptInTcx,\n        }: { address: Address; exceptInTcx?: StellarTxnContext }\n    ): Promise<UTxO | undefined> {\n        const utxos = await this.network.getUtxos(address);\n        const filterUtxos = exceptInTcx?.reservedUtxos();\n\n        const filtered = exceptInTcx\n            ? utxos.filter(exceptInTcx.utxoNotReserved.bind(exceptInTcx))\n            : utxos;\n\n        console.log(\n            `finding '${name}' utxo${\n                exceptInTcx ? \" (not already being spent in txn)\" : \"\"\n            } from set:\\n  ${utxosAsString(filtered, \"\\n  \")}`,\n            ...(exceptInTcx && filterUtxos?.length\n                ? [\n                      \"\\n  ... after filtering out:\\n  \",\n                      utxosAsString(exceptInTcx.reservedUtxos(), \"\\n  \"),\n                  ]\n                : [])\n        );\n\n        const found = filtered.find(predicate);\n        if (found) {\n            console.log({\n                found: utxosAsString([found]),\n            });\n        } else {\n            console.log(\"  (not found)\");\n        }\n        return found;\n    }\n\n    async hasMyUtxo(\n        name: string,\n        predicate: utxoPredicate\n    ): Promise<UTxO | undefined> {\n        return this.hasUtxo(name, predicate, { address: this.address });\n    }\n}\n","import {\n    Program,\n    Datum,\n    TxId,\n    TxOutputId,\n    Address,\n    Value,\n    TxOutput,\n    MintingPolicyHash,\n    Assets,\n    Crypto,\n    UTxO,\n    ByteArray,\n    ByteArrayData,\n} from \"@hyperionbt/helios\";\nimport {\n    Activity,\n    StellarContract,\n    isActivity,\n    partialTxn,\n} from \"../lib/StellarContract.js\";\n\n//@ts-expect-error\nimport contract from \"./DefaultMinter.hl\";\nimport { StellarTxnContext } from \"../lib/StellarTxnContext.js\";\nimport {\n    MintCharterRedeemerArgs,\n    MintUUTRedeemerArgs,\n    MinterBaseMethods,\n} from \"../lib/Capo.js\";\nimport { valuesEntry } from \"../lib/HeliosPromotedTypes.js\";\n\nexport type SeedTxnParams = {\n    seedTxn: TxId;\n    seedIndex: bigint;\n};\n\nexport class DefaultMinter\n    extends StellarContract<SeedTxnParams>\n    implements MinterBaseMethods\n{\n    contractSource() {\n        return contract;\n    }\n\n    @Activity.partialTxn\n    async txnCreatingUUT(\n        tcx: StellarTxnContext,\n        uutPurpose: string\n    ): Promise<Value> {\n        //!!! make it big enough to serve minUtxo for the new UUT\n        const uutSeed = this.mkValuePredicate(BigInt(42_000), tcx);\n\n        return this.mustFindActorUtxo(\n            `for-uut-${uutPurpose}`,\n            uutSeed,\n            tcx\n        ).then(async (freeSeedUtxo) => {\n            tcx.addInput(freeSeedUtxo);\n            const { txId, utxoIdx } = freeSeedUtxo;\n            const { encodeBech32, blake2b, encodeBase32 } = Crypto;\n\n            const assetName = `${uutPurpose}.${encodeBase32(\n                blake2b(txId.bytes.concat([\"@\".charCodeAt(0), utxoIdx]), 6)\n            )}`;\n            const vEntries = this.mkUUTValuesEntries(assetName);\n\n            const { txId: seedTxn, utxoIdx: seedIndex } = freeSeedUtxo;\n\n            tcx.attachScript(this.compiledContract).mintTokens(\n                this.mintingPolicyHash!,\n                vEntries,\n                this.mintingUUT({\n                    seedTxn,\n                    seedIndex,\n                    assetName,\n                }).redeemer\n            );\n\n            const v = new Value(\n                undefined,\n                new Assets([[this.mintingPolicyHash!, vEntries]])\n            );\n\n            return v;\n        });\n    }\n    mkUUTValuesEntries(assetName) {\n        return [this.mkValuesEntry(assetName, BigInt(1))];\n    }\n\n    //! overrides base getter type with undefined not being allowed\n    get mintingPolicyHash(): MintingPolicyHash {\n        return super.mintingPolicyHash!;\n    }\n\n    @Activity.redeemer\n    protected mintingCharterToken({ owner }: MintCharterRedeemerArgs) : isActivity {\n        // debugger\n        const t =\n            new this.configuredContract.types.Redeemer.mintingCharterToken(\n                owner\n            );\n\n        return { redeemer: t._toUplcData() }\n    }\n\n    @Activity.redeemer\n    protected mintingUUT({\n        seedTxn,\n        seedIndex: sIdx,\n        assetName,\n    }: MintUUTRedeemerArgs)  : isActivity {\n        // debugger\n        const seedIndex = BigInt(sIdx);\n        const t = new this.configuredContract.types.Redeemer.mintingUUT(\n            seedTxn,\n            seedIndex,\n            ByteArrayData.fromString(assetName).bytes\n        );\n\n        return { redeemer: t._toUplcData() }\n    }\n\n    get charterTokenAsValuesEntry(): valuesEntry {\n        return this.mkValuesEntry(\"charter\", BigInt(1));\n    }\n\n    get charterTokenAsValue() {\n        const { mintingPolicyHash } = this;\n\n        const v = new Value(\n            this.ADA(1.7),\n            new Assets([[mintingPolicyHash, [this.charterTokenAsValuesEntry]]])\n        );\n        return v;\n    }\n\n    @Activity.partialTxn\n    async txnMintingCharterToken(\n        tcx: StellarTxnContext,\n        owner: Address\n    ): Promise<StellarTxnContext> {\n        const tVal = this.charterTokenAsValuesEntry;\n\n        return tcx\n            .mintTokens(\n                this.mintingPolicyHash!,\n                [tVal],\n                this.mintingCharterToken({ owner }).redeemer\n            )\n            .attachScript(this.compiledContract);\n    }\n}\n","import {\n    Address,\n    Datum,\n    MintingPolicyHash,\n    TxId,\n    TxOutput,\n    UTxO,\n    Value,\n} from \"@hyperionbt/helios\";\nimport { DefaultMinter, SeedTxnParams } from \"../src/DefaultMinter.js\";\nimport {\n    Activity,\n    StellarConstructorArgs,\n    StellarContract,\n    datum,\n    isActivity,\n    paramsBase,\n    partialTxn,\n    stellarSubclass,\n    txn,\n} from \"./StellarContract.js\";\nimport { InlineDatum, valuesEntry } from \"./HeliosPromotedTypes.js\";\nimport { StellarTxnContext } from \"./StellarTxnContext.js\";\n\ntype minterContract<T extends paramsBase = any> = StellarContract<T>;\n\nexport type seedUtxoParams = {\n    seedTxn: TxId;\n    seedIndex: bigint;\n};\n// P extends paramsBase = SC extends StellarContract<infer PT> ? PT : never\n\ninterface hasUUTCreator {\n    txnCreatingUUT(tcs: StellarTxnContext, uutPurpose: string): Promise<Value>;\n}\n\nexport type MintCharterRedeemerArgs = {\n    owner: Address;\n};\nexport type MintUUTRedeemerArgs = {\n    seedTxn: TxId;\n    seedIndex: bigint | number;\n    assetName: string;\n};\n\nexport interface MinterBaseMethods extends hasUUTCreator {\n    get mintingPolicyHash(): MintingPolicyHash;\n    txnMintingCharterToken(\n        tcx: StellarTxnContext,\n        owner: Address,\n        tVal: valuesEntry\n    ): Promise<StellarTxnContext>;\n}\n\nexport type anyDatumArgs = Record<string, any>;\n\nexport abstract class Capo<\n        minterType extends MinterBaseMethods & DefaultMinter = DefaultMinter\n    >\n    extends StellarContract<SeedTxnParams>\n    implements hasUUTCreator\n{\n    constructor(\n        args: StellarConstructorArgs<\n            StellarContract<SeedTxnParams>,\n            SeedTxnParams\n        >\n    ) {\n        super(args);\n\n        const { Datum, Redeemer } = this.configuredContract.types;\n\n        const { CharterToken } = Datum;\n        const { updatingCharter, usingAuthority } = Redeemer;\n\n        if (!CharterToken)\n            throw new Error(\"Datum must have a 'CharterToken' variant\");\n        if (!updatingCharter)\n            throw new Error(\"Redeemer must have a 'updatingCharter' variant\");\n        if (!usingAuthority)\n            throw new Error(\"Redeemer must have a 'usingAuthority' variant\");\n    }\n    abstract contractSource(): string;\n    abstract mkDatumCharterToken(args: anyDatumArgs) : InlineDatum;\n    // abstract txnMustUseCharterUtxo(\n    //     tcx: StellarTxnContext,\n    //     newDatum?: InlineDatum\n    // ): Promise<UTxO | never>;\n\n    get minterClass(): stellarSubclass<DefaultMinter, seedUtxoParams> {\n        return DefaultMinter;\n    }\n\n    minter?: minterType;\n\n    @Activity.partialTxn\n    async txnCreatingUUT(\n        tcx: StellarTxnContext,\n        uutPurpose: string\n    ): Promise<Value> {\n        return this.minter!.txnCreatingUUT(tcx, uutPurpose);\n    }\n\n    @Activity.redeemer\n    protected usingAuthority() : isActivity {\n        const r = this.configuredContract.types.Redeemer;\n        const { usingAuthority } = r;\n        if (!usingAuthority) {\n            throw new Error(\n                `invalid contract without a usingAuthority redeemer`\n            );\n        }\n        const t = new usingAuthority();\n\n        return {redeemer: t._toUplcData() }\n    }\n\n    @Activity.redeemer\n    protected updatingCharter({\n        trustees,\n        minSigs,\n    }: {\n        trustees: Address[];\n        minSigs: bigint;\n    }) : isActivity {\n        const t = new this.configuredContract.types.Redeemer.updatingCharter(\n            trustees,\n            minSigs\n        );\n\n        return {redeemer: t._toUplcData() }\n    }\n\n    get charterTokenAsValue() {\n        return this.minter!.charterTokenAsValue\n    }\n\n    @txn\n    async mkTxnMintCharterToken(\n        datumArgs: anyDatumArgs,\n        tcx: StellarTxnContext = new StellarTxnContext()\n    ): Promise<StellarTxnContext | never> {\n        console.log(\"minting charter token\", this.paramsIn);\n\n        return this.mustGetContractSeedUtxo().then((seedUtxo) => {\n            const v = this.charterTokenAsValue;\n            \n            const datum = this.mkDatumCharterToken(datumArgs);\n            const outputs = [new TxOutput(this.address, v, datum)];\n\n            tcx.addInput(seedUtxo).addOutputs(outputs);\n            return this.minter!.txnMintingCharterToken(tcx, this.address);\n        });\n    }\n    get charterTokenPredicate() {\n        const ctVal = this.charterTokenAsValue;\n        const predicate = this.mkTokenPredicate(ctVal)\n\n        return predicate\n    }\n\n    async mustFindCharterUtxo() {\n        const ctVal = this.charterTokenAsValue;\n        const predicate = this.mkTokenPredicate(ctVal)\n\n        return this.mustFindMyUtxo(\n            \"charter\", predicate,\n            \"has it been minted?\"\n        )\n    }\n\n    @partialTxn  // non-activity partial\n    async txnMustUseCharterUtxo(\n        tcx: StellarTxnContext,\n        redeemer: isActivity,\n        newDatum?: InlineDatum\n    ): Promise<StellarTxnContext | never> {\n        return this.mustFindCharterUtxo().then((ctUtxo: UTxO) => {\n            tcx.addInput(\n                ctUtxo,\n                redeemer.redeemer\n            ).attachScript(this.compiledContract);\n\n            const datum = newDatum || (ctUtxo.origOutput.datum as InlineDatum);\n\n            this.txnKeepCharterToken(tcx, datum);\n            return tcx\n        });\n    }\n\n\n    @partialTxn  // non-activity partial\n    async txnUpdateCharterUtxo(\n        tcx: StellarTxnContext,\n        redeemer: isActivity,\n        newDatum: InlineDatum\n    ): Promise<StellarTxnContext| never> {\n        // this helper function is very simple.  Why have it?  \n        //   -> its 3rd arg is required,\n        //   -> and its name gives a more specific meaning.\n        return this.txnMustUseCharterUtxo(tcx, redeemer, newDatum );\n    }\n\n    @partialTxn  // non-activity partial\n    txnKeepCharterToken(tcx: StellarTxnContext, datum: InlineDatum) {\n        \n        tcx.addOutput(\n            new TxOutput(this.address, this.charterTokenAsValue, datum)\n        );\n\n        return tcx;\n    }\n\n    @partialTxn\n    async txnAddAuthority(tcx: StellarTxnContext) {\n        return this.txnMustUseCharterUtxo(tcx, this.usingAuthority())\n    }\n\n\n    //! it can provide minter-targeted params through getMinterParams()\n    getMinterParams() {\n        return this.paramsIn;\n    }\n\n    getContractParams(params: SeedTxnParams) {\n        const { mph } = this;\n        // console.log(\"this treasury uses mph\", mph?.hex);\n\n        return {\n            mph,\n        };\n    }\n\n    get mph() {\n        const minter = this.connectMintingScript(this.getMinterParams());\n        return minter.mintingPolicyHash!;\n    }\n\n    get mintingPolicyHash() {\n        return this.mph;\n    }\n\n    connectMintingScript(params: SeedTxnParams): minterType {\n        if (this.minter) return this.minter;\n        const { minterClass } = this;\n        const { seedTxn, seedIndex } = this.paramsIn;\n\n        const minter = this.addScriptWithParams(minterClass, params);\n        const { mintingCharterToken, mintingUUT } =\n            minter.configuredContract.types.Redeemer;\n        if (!mintingCharterToken)\n            throw new Error(\n                `minting script doesn't offer required 'mintingCharterToken' activity-redeemer`\n            );\n        if (!mintingUUT)\n            throw new Error(\n                `minting script doesn't offer required 'mintingCharterToken' activity-redeemer`\n            );\n\n        //@ts-ignore-error - can't seem to indicate to typescript that minter's type can be relied on to be enough\n        return (this.minter = minter);\n    }\n\n    async mustGetContractSeedUtxo(): Promise<UTxO | never> {\n        //! given a Capo-based contract instance having a free UTxO to seed its validator address,\n        //! prior to initial on-chain creation of contract,\n        //! it finds that specific UTxO in the current user's wallet.\n        const { seedTxn, seedIndex } = this.paramsIn;\n        console.log(\"seeking seed txn\", seedTxn.hex, seedIndex);\n        return this.mustFindActorUtxo(\n            \"seed\",\n            (u) => {\n                const { txId, utxoIdx } = u;\n\n                if (txId.eq(seedTxn) && BigInt(utxoIdx) == seedIndex) {\n                    return u;\n                }\n            },\n            \"already spent?\"\n        );\n    }\n\n    capoRequirements() {\n        return {\n            \"is a base class for leader/Capo pattern\": {\n                purpose:\n                    \"so that smart contract developers can easily start multi-script development\",\n                details: [\n                    \"Instantiating a Capo contract always uses the seed-utxo pattern for uniqueness.\",\n                    \"Subclassing Capo with no type-params gives the default minter,\",\n                    \"  ... which only allows UUTs to be created\",\n                    \"Subclassing Capo<CustomMinter> gives an overloaded minter,\",\n                    \"  ... which must allow UUT minting and may allow more Activities too.\",\n                ],\n                mech: [\n                    \"provides a default minter\",\n                    \"allows the minter class to be overridden\",\n                ],\n            },\n            \"can create unique utility tokens\": {\n                purpose:\n                    \"so the contract can use UUTs for scoped-authority semantics\",\n                details: [\n                    \"Building a txn with a UUT involves using the txnCreatingUUT partial-helper on the Capo.\",\n                    \"That UUT (a Value) is returned, and then should be added to a TxOutput.\",\n                    \"The partial-helper doesn't constrain the semantics of the UUT.\",\n                    \"The UUT uses the seed-utxo pattern to form 64 bits of uniqueness\",\n                    \"   ... so that token-names stay short-ish.\",\n                    \"The uniqueness level can be iterated in future as needed.\",\n                    \"The UUT's token-name combines its textual purpose with a short hash \",\n                    \"   ... of the seed UTxO, formatted with bech32\",\n                ],\n            },\n        };\n    }\n}\n","import * as helios from \"@hyperionbt/helios\";\nimport {\n    Address,\n    Crypto,\n    NetworkEmulator,\n    NetworkParams,\n    Program,\n    Tx,\n    TxId,\n    TxOutput,\n    UplcProgram,\n    Value,\n    Wallet,\n    WalletEmulator,\n} from \"@hyperionbt/helios\";\n\nimport { promises as fs } from \"fs\";\nimport { Vitest, vitest, TestContext, expect } from \"vitest\";\nimport {\n    StellarConstructorArgs,\n    StellarContract,\n    findInputsInWallets,\n    paramsBase,\n    stellarSubclass,\n} from \"./StellarContract.js\";\nimport {\n    lovelaceToAda, txAsString,\n    utxosAsString\n} from \"./diagnostics.js\";\nimport { Capo, anyDatumArgs } from \"./Capo.js\";\nimport { SeedTxnParams } from \"../src/DefaultMinter.js\";\nimport { CharterDatumArgs } from \"../src/examples/SampleTreasury.js\";\nimport { StellarTxnContext } from \"./StellarTxnContext.js\";\n\nconst preProdParams = JSON.parse(\n    await fs.readFile(\"./src/preprod.json\", \"utf8\")\n);\n\ntype enhancedNetworkParams = NetworkParams & {\n    slotToTimestamp(n: bigint): Date;\n};\n\nexport interface StellarTestContext<\n    HTH extends StellarTestHelper<SC, P>,\n    SC extends StellarContract<any> = HTH extends StellarTestHelper<\n        infer SC2,\n        any\n    >\n        ? SC2\n        : never,\n    P extends paramsBase = SC extends StellarContract<infer PT> ? PT : never\n> extends canHaveRandomSeed,\n        TestContext {\n    h: HTH;\n    get strella(): SC;\n    initHelper(\n        // <\n        //     SC extends StellarContract<any>,\n        //     P extends paramsBase = SC extends StellarContract<infer PT> ? PT : never\n        // >\n        params: Partial<P> & canHaveRandomSeed & canSkipSetup\n    ): Promise<StellarTestHelper<SC, P>>;\n}\n\nexport type helperSubclass<\n    SC extends StellarContract<any>,\n    P extends paramsBase = SC extends StellarContract<infer PT> ? PT : never\n> = new (params: P & canHaveRandomSeed) => StellarTestHelper<SC, P>;\n\ntype canHaveRandomSeed = {\n    randomSeed?: number;\n};\ntype canSkipSetup = {\n    skipSetup?: true;\n};\n\nexport async function addTestContext<\n    SC extends StellarContract<any>,\n    P extends paramsBase = SC extends StellarContract<infer PT> ? PT : never\n>(\n    context: StellarTestContext<any, SC, P>,\n    TestHelperClass: helperSubclass<SC>,\n    params?: P\n) {\n    console.log(\" ======== ========= ======== +test context\");\n    Object.defineProperty(context, \"strella\", {\n        get: function () {\n            return this.h.strella;\n        },\n    });\n\n    context.initHelper = async (params) => {\n        //@ts-expect-error\n        const helper = new TestHelperClass(params);\n        if (context.h) {\n            if (!params.skipSetup)\n                throw new Error(\n                    `re-initializing shouldn't be necessary without skipSetup`\n                );\n            console.log(\n                \"   ............. reinitializing test helper without setup\"\n            );\n        }\n        context.h = helper;\n        // console.log(\"context IS \", context)\n        return helper;\n    };\n    try {\n        //@ts-expect-error\n        await context.initHelper(params);\n    } catch (e) {\n        if (!params) {\n            // console.error(e.stack || e.message || JSON.stringify(e));\n            console.error(\n                `${TestHelperClass.name}: error during initialization; does this test helper require initialization with explicit params?`\n            );\n            throw e;\n        } else {\n            console.error(\"urgh\");\n            throw e;\n        }\n    }\n}\n\nexport abstract class StellarTestHelper<\n    SC extends StellarContract<any>,\n    P extends paramsBase = SC extends StellarContract<infer PT> ? PT : never\n> {\n    state: Record<string, any>;\n    abstract get stellarClass(): stellarSubclass<SC, any>;\n    defaultActor?: string;\n    strella!: SC;\n    actors: actorMap;\n    optimize = false;\n    liveSlotParams: NetworkParams;\n    networkParams: NetworkParams;\n    network: NetworkEmulator;\n    private actorName: string;\n\n    //@ts-ignore type mismatch in getter/setter until ts v5\n    get currentActor(): WalletEmulator {\n        return this.actors[this.actorName];\n    }\n    set currentActor(actorName: string) {\n        const thisActor = this.actors[actorName];\n        if (!thisActor)\n            throw new Error(\n                `setCurrentActor: invalid actor name '${actorName}'`\n            );\n        if (this.strella) this.strella.myActor = thisActor\n        this.actorName = actorName;\n    }\n\n    address?: Address;\n\n    setupPending?: Promise<any>;\n    setupActors() {\n        console.warn(\n            `using 'hiro' as default actor because ${this.constructor.name} doesn't define setupActors()`\n        );\n        this.addActor(\"hiro\", 1863n * ADA);\n        this.currentActor = \"hiro\";\n    }\n\n    constructor(params?: P & canHaveRandomSeed & canSkipSetup) {\n        this.state = {};\n        const [theNetwork, emuParams] = this.mkNetwork();\n        this.liveSlotParams = emuParams;\n        this.network = theNetwork;\n        this.networkParams = new NetworkParams(preProdParams);\n\n        this.actors = {};\n        this.actorName = \"\"; //only to make typescript happy\n        this.setupActors();\n        if (!this.actorName)\n            throw new Error(\n                `${this.constructor.name} doesn't set currentActor in setupActors()`\n            );\n        const now = new Date();\n        this.waitUntil(now);\n        if (params?.skipSetup) {\n            console.log(\"test helper skipping setup\");\n            return;\n        }\n\n        //@ts-expect-error - can serve no-params case or params case\n        this.setupPending = this.setup(params).then((p) => {\n            return p;\n        });\n    }\n    async setup(params: P & canHaveRandomSeed) {\n        const { randomSeed, ...p } = params;\n        if (this.setupPending) await this.setupPending;\n        if (this.strella && this.randomSeed == randomSeed) {\n            console.log(\n                \"       ----- skipped duplicate setup() in test helper\"\n            );\n            return this.strella;\n        }\n        if (this.strella) {\n            console.warn(\n                \".... warning: new test helper setup with new seed....\"\n            );\n            this.rand = undefined;\n            this.randomSeed = randomSeed;\n        }\n\n        return this.initStrella(p as P);\n    }\n\n    initStrella(params: P) {\n        const TargetClass = this.stellarClass;\n\n        const strella = new TargetClass({\n            params,\n            network: this.network,\n            myActor: this.currentActor,\n            networkParams: this.networkParams,\n            isTest: true,\n        });\n\n        this.strella = strella;\n        this.address = strella.address;\n        return strella;\n    }\n\n    //! it has a seed for mkRandomBytes, which must be set by caller\n    randomSeed?: number;\n    //! it makes a rand() function based on the randomSeed after first call to mkRandomBytes\n    rand?: () => number;\n\n    delay(ms) {\n        return new Promise((res) => setTimeout(res, ms));\n    }\n\n    mkNetwork(): [NetworkEmulator, enhancedNetworkParams] {\n        const theNetwork = new NetworkEmulator();\n\n        const emuParams = theNetwork.initNetworkParams({\n            ...preProdParams,\n            raw: { ...preProdParams },\n        }) as enhancedNetworkParams;\n\n        emuParams.timeToSlot = function (t) {\n            const seconds = BigInt(t / 1000n);\n            return seconds;\n        };\n        emuParams.slotToTimestamp = this.slotToTimestamp;\n\n        return [theNetwork, emuParams];\n    }\n\n    async mkSeedUtxo(seedIndex: bigint = 0n) {\n        const { currentActor } = this;\n        const { network } = this;\n\n        const tx = new Tx();\n        const actorMoney = await currentActor.utxos;\n        console.log(\n            `${this.actorName} has money: \\n` + utxosAsString(actorMoney)\n        );\n\n        tx.addInput(\n            await findInputsInWallets(\n                new helios.Value(30n * ADA),\n                { wallets: [currentActor] },\n                network\n            )\n        );\n\n        tx.addOutput(new TxOutput(currentActor.address, new Value(10n * ADA)));\n        tx.addOutput(new TxOutput(currentActor.address, new Value(10n * ADA)));\n        let si = 2;\n        for (; si < seedIndex; si++) {\n            tx.addOutput(\n                new TxOutput(currentActor.address, new Value(10n * ADA))\n            );\n        }\n        const txId = await this.submitTx(tx, \"force\");\n\n        return txId;\n    }\n\n    async submitTx(tx: Tx, force?: \"force\"): Promise<TxId> {\n        const sendChangeToCurrentActor = this.currentActor.address;\n        const isAlreadyInitialized = !!this.strella;\n        try {\n            await tx.finalize(this.networkParams, sendChangeToCurrentActor);\n        } catch (e) {\n            throw e;\n        }\n        if (isAlreadyInitialized && !force) {\n            throw new Error(\n                `use the submitTx from the testing-context's 'strella' object instead`\n            );\n        }\n\n        console.log(\n            \"Test helper submitting tx prior to instantiateWithParams():\\n \" +\n                txAsString(tx)\n            // new Error(`at stack`).stack\n        );\n\n        const txId = await this.network.submitTx(tx);\n        this.network.tick(1n);\n        // await this.delay(1000)\n        // debugger\n        // this.network.dump();\n        return txId;\n    }\n\n    mkRandomBytes(length: number): number[] {\n        if (!this.randomSeed)\n            throw new Error(\n                `test must set context.randomSeed for deterministic randomness in tests`\n            );\n        if (!this.rand) this.rand = Crypto.rand(this.randomSeed);\n\n        const bytes: number[] = [];\n        for (let i = 0; i < length; i++) {\n            bytes.push(Math.floor(this.rand() * 256));\n        }\n        return bytes;\n    }\n\n    addActor(roleName: string, walletBalance: bigint) {\n        if (this.actors[roleName])\n            throw new Error(`duplicate role name '${roleName}'`);\n        //! it instantiates a wallet with the indicated balance pre-set\n        const a = this.network.createWallet(walletBalance);\n        console.log(\n            `+🎭 Actor: ${roleName}: ${a.address\n                .toBech32()\n                .substring(0, 18)}… ${lovelaceToAda(\n                walletBalance\n            )} (🔑#${a.address.pubKeyHash.hex.substring(0, 8)}…)`\n        );\n\n        //! it makes collateral for each actor, above and beyond the initial balance,\n        //  ... so that the full balance is spendable and the actor can immediately\n        //  ... engage in smart-contract interactions.\n\n        this.network.tick(BigInt(2));\n        this.network.createUtxo(a, 5n * ADA);\n        this.network.tick(BigInt(1));\n\n        this.actors[roleName] = a;\n        return a;\n    }\n\n    slotToTimestamp(s: bigint) {\n        const num = parseInt(BigInt.asIntN(52, s * 1000n).toString());\n        return new Date(num);\n    }\n\n    currentSlot() {\n        return this.liveSlotParams.liveSlot;\n    }\n\n    waitUntil(time: Date) {\n        const targetTimeMillis = BigInt(time.getTime());\n        const targetSlot = this.liveSlotParams.timeToSlot(targetTimeMillis);\n        const c = this.currentSlot();\n\n        const slotsToWait = targetSlot - c;\n        if (slotsToWait < 1) {\n            throw new Error(`the indicated time is not in the future`);\n        }\n        // console.warn(`waiting ${slotsToWait} slots -> ${time}`);\n\n        this.network.tick(slotsToWait);\n        return slotsToWait;\n    }\n}\n\nexport abstract class StellarCapoTestHelper<\n    SC extends Capo<any>\n> extends StellarTestHelper<SC, SeedTxnParams> {\n    async setup({\n        randomSeed = 42,\n        seedTxn,\n        seedIndex = 0n,\n    }: { seedTxn?: TxId; seedIndex?: bigint; randomSeed?: number } = {}) {\n        if (this.setupPending) await this.setupPending;\n        if (this.strella && this.randomSeed == randomSeed) {\n            console.log(\n                \"       ----- skipped duplicate setup() in test helper\"\n            );\n\n            return this.strella;\n        }\n        if (this.strella)\n            console.warn(\n                \".... warning: new test helper setup with new seed....\"\n            );\n        this.randomSeed = randomSeed;\n        // console.log(new Error(\"setup from\").stack)\n        if (!seedTxn) {\n            seedTxn = await this.mkSeedUtxo(seedIndex);\n        }\n        const script = this.initStrella({\n            seedTxn,\n            seedIndex,\n        });\n        const { address, mintingPolicyHash: mph } = script;\n\n        const { name } = script.configuredContract;\n        console.log(\n            name,\n            address.toBech32().substring(0, 18) + \"…\",\n            \"vHash 📜 \" +\n                script.compiledContract.validatorHash.hex.substring(0, 12) +\n                \"…\",\n            \"mph 🏦 \" + mph?.hex.substring(0, 12) + \"…\"\n        );\n        return script;\n    }\n\n    async mintCharterToken(args?: anyDatumArgs): Promise<StellarTxnContext> {\n        const { delay } = this;\n        const { tina, tom, tracy } = this.actors;\n        if (this.state.mintedCharterToken) {\n            console.warn(\n                \"reusing  minted charter from existing testing-context\"\n            );\n            return this.state.mintedCharterToken;\n        }\n\n        await this.setup();\n        const script = this.strella!;\n        args = args || {\n            trustees: [tina.address, tom.address, tracy.address],\n            minSigs: 2,\n        };\n        const tcx = await script.mkTxnMintCharterToken(args);\n        expect(script.network).toBe(this.network);\n\n        await script.submit(tcx);\n        console.log(\"charter token minted\");\n\n        this.network.tick(1n);\n        return (this.state.mintedCharterToken = tcx);\n    }\n}\n\ntype actorMap = Record<string, WalletEmulator>;\n\nexport const ADA = 1_000_000n; // lovelace\n","import {\n    Address,\n    Program,\n    Tx,\n    UplcProgram,\n    TxOutput,\n    Value,\n    Datum,\n    Wallet,\n    UTxO,\n    DatumHash,\n    ByteArray,\n    Assets,\n    TxId,\n    UplcData,\n    Signature,\n} from \"@hyperionbt/helios\";\n\nimport {\n    datum,\n    partialTxn,\n    txn,\n} from \"../../lib/StellarContract.js\";\nimport { InlineDatum } from \"../../lib/HeliosPromotedTypes.js\";\n\nimport { StellarTxnContext } from \"../../lib/StellarTxnContext.js\";\n\n//@ts-expect-error\nimport contract from \"./SampleTreasury.hl\";\nimport { Capo } from \"../../lib/Capo.js\";\n\nexport type CharterDatumArgs = {\n    trustees: Address[];\n    minSigs: number | bigint;\n};\n\nexport type HeldAssetsArgs = {\n    purposeId?: string;\n    purpose?: string;\n};\n\nexport class SampleTreasury extends Capo {\n    contractSource() {\n        return contract;\n    }\n\n    @datum\n    mkDatumCharterToken({\n        trustees,\n        minSigs,\n    }: {\n        trustees: Address[];\n        minSigs: bigint;\n    }): InlineDatum {\n        //!!! todo: make it possible to type these datum helpers more strongly\n        const t = new this.configuredContract.types.Datum.CharterToken(\n            trustees,\n            minSigs\n        );\n        return Datum.inline(t._toUplcData());\n    }\n\n\n    //!!! consider making trustee-sigs only need to cover the otherRedeemerData\n    //       new this.configuredContract.types.Redeemer.authorizeByCharter(otherRedeemerData, otherSignatures);\n    // mkAuthorizeByCharterRedeemer(otherRedeemerData: UplcData, otherSignatures: Signature[]) {\n\n\n\n    @txn\n    async mkTxnMintCharterToken(\n        { trustees, minSigs }: CharterDatumArgs,\n        tcx: StellarTxnContext = new StellarTxnContext()\n    ): Promise<StellarTxnContext | never> {\n        console.log(\"minting charter token\", this.paramsIn);\n\n        return this.mustGetContractSeedUtxo().then((seedUtxo) => {\n            const v = this.charterTokenAsValue;\n            // this.charterTokenDatum\n            const datum = this.mkDatumCharterToken({\n                trustees,\n                minSigs: BigInt(minSigs),\n            });\n\n            const outputs = [new TxOutput(this.address, v, datum)];\n\n            tcx.addInput(seedUtxo).addOutputs(outputs);\n            return this.minter!.txnMintingCharterToken(tcx, this.address);\n        });\n    }\n \n    @txn\n    async mkTxnUpdateCharter(\n        trustees: Address[],\n        minSigs: bigint,\n        tcx: StellarTxnContext = new StellarTxnContext()\n    ): Promise<StellarTxnContext> {\n        return this.txnUpdateCharterUtxo(\n            tcx,\n            this.updatingCharter({ trustees, minSigs }),\n            this.mkDatumCharterToken({ trustees, minSigs })\n        )\n    }\n\n    requirements() {\n        return {\n            \"positively governs all administrative actions\": {\n                purpose: \"to maintain clear control by a trustee group\",\n                details: [\n                    // descriptive details of the requirement (not the tech):\n                    \"a trustee group is defined during contract creation\",\n                    \"the trustee list's signatures provide consent\",\n                    \"the trustee group can evolve by consent of the trustee group\",\n                    \"a threshold set of the trustee group can give consent for the whole group\",\n                ],\n                mech: [\n                    // descriptive details of the chosen mechanisms for implementing the reqts:\n                    \"uses a 'charter' token specialized for this contract\",\n                    \"the charter token has a trustee list in its Datum structure\",\n                    \"the charter token has a threshold setting in its Datum structure\",\n                    \"the charter Datum is updated when needed to reflect new trustees/thresholds\",\n                ],\n                requires: [\n                    \"has a unique, permanent charter token\",\n                    \"has a unique, permanent treasury address\",\n                    \"the trustee threshold is enforced on all administrative actions\",\n                    \"the trustee group can be changed\",\n                    \"the charter token is always kept in the contract\",\n                    \"can mint other tokens, on the authority of the Charter token\",\n                ],\n            },\n\n            \"has a singleton minting policy\": {\n                purpose: \"to mint various tokens authorized by the treasury\",\n                details: [\n                    \"A chosen minting script is bound deterministically to the contract constellation\",\n                    \"Its inaugural (aka 'initial Charter' or 'Charter Mint') transaction creates a charter token\",\n                    \"The minting script can issue further tokens approved by Treasury Trustees\",\n                    \"The minting script does not need to concern itself with details of Treasury Trustee approval\",\n                ],\n                mech: [\n                    \"has an initial UTxO chosen arbitrarily, and that UTxO is consumed during initial Charter\",\n                    \"makes a different address depending on (txId, outputIndex) parameters of the Minting script\",\n                ],\n                requires: [],\n            },\n\n            \"has a unique, permanent treasury address\": {\n                purpose: \"to give continuity for its stakeholders\",\n                details: [\n                    \"One-time creation is ensured by UTxO's unique-spendability property\",\n                    \"Determinism is transferred from the charter utxo to the MPH and to the treasury address\",\n                ],\n                mech: [\n                    \"uses the Minting Policy Hash as the sole parameter for the treasury spending script\",\n                ],\n                requires: [\"has a singleton minting policy\"],\n            },\n\n            \"has a unique, permanent charter token\": {\n                purpose:\n                    \"to guarantee permanent identity of a token constraining administrative actions\",\n                details: [\n                    \"a charter token is uniquely created when bootstrapping the constellation contract\",\n                    \"the charter token can't ever be recreated (it's non-fungible and can't be re-minted)\",\n                    \"the treasury address, minting policy hash, and charter token are all deterministic based on input utxo\",\n                ],\n                impl: \"txMintCharterToken()\",\n                mech: [\n                    \"creates a unique 'charter' token, with assetId determined from minting-policy-hash+'charter'\",\n                    \"TODO: fails if minSigs is longer than trustee list\",\n                    \"doesn't work with a different spent utxo\",\n                ],\n                requires: [\n                    \"has a singleton minting policy\",\n                    \"the charter token is always kept in the contract\",\n                ],\n            },\n\n            \"the charter token is always kept in the contract\": {\n                purpose:\n                    \"so that the treasury contract is always in control of administrative changes\",\n                details: [\n                    \"The charter token's spendability' is used as a signal of administrative authority for transactions wanting proof of authority\",\n                    \"... thus, other scripts don't need to express any of the authority policy, but can simply verify the token's presence in the txn\",\n                    \"It shouldn't ever be possible to interfere with its spendability, e.g. by bundling it in an inconvenient way with other assets\",\n                    \"By enforcing that the charter token is always returned to the contract, \",\n                    \"... it has assurance of continuing ability to govern the next activity using that token\",\n                    \"Note: the charter mint can bind with any contract having suitable assurances, \",\n                    \"... but we only focus on the case of binding to this treasury contract\",\n                ],\n                mech: [\n                    \"builds transactions with the charter token returned to the contract\",\n                    \"fails to spend the charter token if it's not returned to the contract\",\n                    \"TODO: keeps the charter token separate from other assets in the contract\",\n                ],\n                requires: [],\n            },\n\n            \"XXX can mint other tokens, on the authority of the charter token\": {\n                purpose:\n                    \"to simplify the logic of minting, while being sure of minting authority\",\n                details: [\n                    \"the minting policy doesn't have to directly enforce the trustee-list policy\",\n                    \"instead, it delegates that to the treasury spending script, \",\n                    \"... and simply requires that the charter token is used for minting anything else\",\n                ],\n                mech: [\n                    \"can build transactions that mint non-'charter' tokens\",\n                    \"requires the charter-token to be spent as proof of authority\",\n                    \"fails if the charter-token is not returned to the treasury\",\n                    \"fails if the charter-token parameters are modified\",\n                ],\n            },\n\n            \"the trustee group can be changed\": {\n                purpose: \"to ensure administrative continuity for the group\",\n                details: [\n                    \"When the needed threshold for administrative modifications is achieved, the Charter Datum can be updated\",\n                    \"This type of administrative action should be explicit and separate from any other administrative activity\",\n                    \"If the CharterToken's Datum is being changed, no other redeemer activities are allowed\",\n                ],\n                mech: [\n                    \"requires the existing threshold of existing trustees to be met\",\n                    \"requires all of the new trustees to sign the transaction\",\n                    \"does not allow minSigs to exceed the number of trustees\",\n                ],\n                requires: [\n                    \"the trustee threshold is enforced on all administrative actions\",\n                ],\n            },\n\n            \"the trustee threshold is enforced on all administrative actions\": {\n                purpose:\n                    \"allows progress in case a small fraction of trustees may not be available\",\n                details: [\n                    \"A group can indicate how many of the trustees are required to provide their explicit approval\",\n                    \"If a small number of trustees lose their keys, this allows the remaining trustees to directly regroup\",\n                    \"For example, they can replace the trustee list with a new set of trustees and a new approval threshold\",\n                    \"Normal day-to-day administrative activities can also be conducted while a small number of trustees are on vacation or otherwise temporarily unavailable\",\n                ],\n                mech: [\n                    \"doesn't allow the charterToken to be sent without enough minSigs from the trustee list\",\n                ],\n                requires: [],\n            },\n\n            foo: {\n                purpose: \"\",\n                details: [],\n                mech: [],\n                requires: [],\n            },\n        };\n    }\n}\n"],"names":["x","tcx","s","contract","__decorateClass","Datum","datum","fs","params"],"mappings":"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"}